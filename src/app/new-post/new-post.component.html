<app-header [new]="true"></app-header> <!-- header/nav -->
<div class="main-content">
    <!-- side navigation -->
    <nav class="side-nav">
        <ul>
            <ng-container *ngFor="let account of connectedAccounts">
                <!-- If platform is connected render the checkbox & checkbox cover -->
                <li *ngIf="twitter.connected; else elseTwitter"><input type="checkbox" id="bp{{ account.screen_name }}" class="twitter-checkbox input-checkbox" name="twitter-checkbox" checked /><div class="checkbox twitter-label" id="{{ account.id_str }}" (click)="toggleUser($event, account)" ></div> {{account.name}}</li>
                <!-- If the platform isn't connected then render the checkbox & checkbox cover within the "checkbox-container" to prevent the user from selecting a platform they aren't connected to -->
                <ng-template #elseTwitter>
                    <div class="checkbox-container">
                        <li><input type="checkbox" class="twitter-checkbox input-checkbox" name="twitter-checkbox" disabled /><div class="checkbox twitter-label" id="twitter"></div> {{account.name}}</li>
                    </div>
                </ng-template>
            </ng-container>
        </ul>
    </nav>
    <main>
        <!-- main body/content -->
        <form method="POST" action="/new-post" (submit)="newPost($event)" (reset)="resetCharLimit()">
            <!-- input/post -->
            <textarea class="primary-input" [ngClass]="{'limit': percentage >= 100}" placeholder="Type your post here" name="primary-post" (keydown)="onPrimaryInput()" maxlength="280"></textarea>
            <section class="user-container">
                <div class="users bp{{ user.screen_name }} hide" *ngFor="let user of connectedAccounts" title="@{{ user.screen_name }}">
                    <img src="{{ user.profile_image_url }}" alt="{{ user.screen_name }}" />
                </div>
                <div class="char-limit" [ngClass]="{'void': percentage >= 100}">
                    <p>Character Limit</p>
                    <span class="background"></span>
                </div>
            </section>
            <!-- buttons/menu -->
            <div class="menu">
                <div class="button-container">
                    <button class="submit" [disabled]="disabled">Post</button>
                    <button class="submit" [disabled]="disabled">Schedule</button>
                    <button class="clear" type="reset">Clear</button>
                </div>
            </div>            
            <!-- loading cicle for posting -->
            <div *ngIf="loading" class="loading">
                <app-loading></app-loading>
            </div>
            <!-- errors show here if there are any -->
            <div class="messages" *ngFor="let message of messages">
                <p *ngIf="!message.success; else successMessgaes" class="error">{{ message.text }}</p>
                <ng-template #successMessgaes>
                    <p *ngIf="success">{{ message.text }}</p> <!-- the success variable is set to false after 5 seconds to hide success messages - whereas errors will remain constant -->
                </ng-template>
            </div>
            <a *ngIf="!twitter.connected" href="my-account" class="no-account" >Please connect at least one account in order to use the posting function</a>
        </form>
    </main>
</div>