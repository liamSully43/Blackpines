<app-header [feed]="true"></app-header>
<div class="main-content">
    <app-side-nav [feed]="true" [twitter]="twitter" [linkedin]="linkedin" [facebook]="facebook" (toggleFeedMethod)="toggleFeed($event)" (platformFeeds)="togglePlatforms($event)"></app-side-nav>
    <main>
        <div *ngIf="twitter.feed" class="feeds">
            <app-platform-headers platform="twitter"></app-platform-headers> <!-- headers -->
            <!-- loading circle -->
            <div class="loading-container" *ngIf="loadingTwitter; else twitterFeedBlock">
                <app-loading></app-loading>
            </div>
            <ng-template #twitterFeedBlock>
                <p *ngIf="twitterFeedError" class="error">{{ twitterFeedError }}</p> <!-- error message -->
                <!-- feed -->
                <div *ngFor="let post of twitterFeed">
                    <app-feed-posts [post]=post [search]="false" [user]="user" (showPost)="showTweet($event)" (showUser)="showTwitterAccount($event)" (fetchUserEvent)="fetchUser($event)"></app-feed-posts>
                </div>
            </ng-template>
        </div>

        <div *ngIf="linkedin.feed" class="feeds">
            <app-platform-headers platform="linkedin"></app-platform-headers> <!-- headers -->
            <!-- loading circle -->
            <div class="loading-container" *ngIf="loadingLinkedin; else linkedinFeedBlock">
                <app-loading></app-loading>
            </div>
            <ng-template #linkedinFeedBlock>
                <p *ngIf="linkedinFeedError" class="error">{{ linkedinFeedError }}</p> <!-- error message -->
                <!-- feed -->
                <div *ngFor="let post of linkedinFeed">
                    <app-feed-posts [post]=post></app-feed-posts>
                </div>
            </ng-template>
        </div>

        <div *ngIf="facebook.feed" class="feeds">
            <app-platform-headers platform="facebook"></app-platform-headers> <!-- headers -->
            <!-- loading circle -->
            <div class="loading-container" *ngIf="loadingFacebook; else facebookFeedBlock">
                <app-loading></app-loading>
            </div>
            <ng-template #facebookFeedBlock>
                <p *ngIf="facebookFeedError" class="error">{{ facebookFeedError }}</p> <!-- error message -->
                <!-- feed -->
                <div *ngFor="let post of facebookFeed">
                    <app-feed-posts [post]=post [search]="false"></app-feed-posts>
                </div>
            </ng-template>
        </div>
    </main>
</div>
<div class="load-account-post" *ngIf="loading">
    <app-loading></app-loading> <!-- loading circle for loading posts and accounts-->
</div>

<!-- post & account previews -->
<app-twitter-account *ngIf="twitterAccount !== false" [account]="twitterAccount" (closePreview)="close()" (showTweet)="showTweet($event)" (showUser)="showTwitterAccount($event)"></app-twitter-account>
<app-twitter-post *ngIf="tweet !== false" [tweet]="tweet" (close)="close()" (updateTweet)="showTweet($event)" (showUser)="showTwitterAccount($event)" (fetchUserEvent)="fetchUser($event)" ></app-twitter-post>
<!--
<app-linkedin-account></app-linkedin-account>
<app-linkedin-post></app-linkedin-post>
<app-facebook-account></app-facebook-account>
<app-facebook-post></app-facebook-post>
-->