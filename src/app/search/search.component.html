<app-header [search]="true"></app-header>
<div class="main-content">
    <main>
        <form action="/search" method="GET" class="search-bar" (submit)="submitForm($event)">
            <input placeholder="Search" name="search" class="search" />
            <select *ngIf="search" (change)="toggleSearch()">
                <option>Users</option>
                <option>Posts</option>
            </select>
            <button type="submit" class="submit">Search</button>
        </form>
        <section>
            <app-platform-headers platform="twitter"></app-platform-headers>
            <div class="results-overflow">
                <!-- user results -->
                <ng-container *ngIf='searchType == "Users"; else twitterElse'>
                    <div *ngFor="let user of twitterResults" class="results">
                        <img width="50" height="50" src="{{ user.profile_image_url }}" />
                        <div class="profile-headers">
                            <p>{{ user.name }}</p>
                            <img *ngIf="user.verified" width="20" height="20" src="../../assets/verified.png" />
                            <p>@{{ user.screen_name }}</p>
                        </div>
                        <p class="text">{{ user.description }}</p>
                        <div class="followers">
                            <p><span>{{ user.friends_count }}</span> Following</p>
                            <p><span>{{ user.followers_count }}</span> Followers</p>
                            <p *ngIf="user.following" class="following">Following</p>
                        </div>
                    </div>
                </ng-container>
                <!-- tweet results -->
                <ng-template #twitterElse>    
                    <div *ngFor="let post of twitterResults" class="results">
                        <img width="50" height="50" src="{{ post.user.profile_image_url }}" />
                        <div class="profile-headers">
                            <p>{{ post.user.name }}</p>
                            <img *ngIf="post.user.verified" width="20" height="20" src="../../assets/verified.png" />
                            <p>@{{ post.user.screen_name }}</p>
                        </div>
                        <p class="text">{{ post.text }}</p>
                        <p class="time">{{ post.time }} | {{ post.date }}</p>
                    </div>
                </ng-template>
            </div>
        </section>
    </main>
</div>